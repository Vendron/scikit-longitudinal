<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>scikit_longitudinal.data_preparation.aggregation_function API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;border-radius:10px;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){table{width:100%;border-collapse:separate;border-spacing:0;margin-bottom:20px;margin-top:20px;background-color:#FAFAFA;box-shadow:0 8px 16px 0 rgba(0,0,0,0.2);border-radius:10px}th,td{text-align:left;padding:15px}td h3{text-align:center;font-weight:bold}th{text-align:center;background-color:#F5F5F5}tr:nth-child(even){background-color:#F9F9F9}tr:hover{background-color:#F5F5F5}th:first-child,td:first-child{border-top-left-radius:10px;border-bottom-left-radius:10px}th:last-child,td:last-child{border-top-right-radius:10px;border-bottom-right-radius:10px}#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>scikit_longitudinal.data_preparation.aggregation_function</code></h1>
</header>
<section id="section-intro">
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.get_agg_feature"><code class="name flex">
<span>def <span class="ident">get_agg_feature</span></span>(<span>data: pandas.core.frame.DataFrame, feature_group: List[str], agg_func: Callable, agg_func_name: str) ‑> pandas.core.frame.DataFrame</span>
</code></dt>
<dd>
<div class="desc"><p>Apply the aggregation function to the feature group and return a DataFrame with the aggregated feature.</p>
<p>The provided function is designed to execute the specified aggregation function on the feature group within the
input DataFrame. The result of this operation is a newly generated DataFrame that contains the aggregated feature
while removing the original longitudinal features.</p>
<h2 id="args">Args</h2>
<p>data (pd.DataFrame):
The DataFrame to aggregate.
feature_group (List[str]):
The list of column names that form the feature group.
agg_func (Callable):
The aggregation function to apply.
agg_func_name (str):
The name of the aggregation function.</p>
<h2 id="returns">Returns</h2>
<p>pd.DataFrame:
A DataFrame with a single column, which is the aggregated feature.</p></div>
</dd>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.init_ray"><code class="name flex">
<span>def <span class="ident">init_ray</span></span>(<span>func: Callable) ‑> Callable</span>
</code></dt>
<dd>
<div class="desc"><p>A decorator to initialise the Ray library for parallel processing.</p>
<p>The purpose of this decorator is to verify the initialisation status of the Ray framework. Init if it is not
already - Furthermore, if the specified number of CPUs is not provided, the system will proceed to initialise Ray
by utilising all available CPUs.</p>
<h2 id="args">Args</h2>
<p>func (Callable):
The function to be decorated.</p>
<h2 id="returns">Returns</h2>
<p>Callable:
The decorated function.</p></div>
</dd>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.mode_with_keepdims"><code class="name flex">
<span>def <span class="ident">mode_with_keepdims</span></span>(<span>x, keepdims=True)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.validate_aggregation_func"><code class="name flex">
<span>def <span class="ident">validate_aggregation_func</span></span>(<span>func: Callable) ‑> Callable</span>
</code></dt>
<dd>
<div class="desc"><p>A decorator to validate the aggregation function passed to the class.</p>
<p>The decorator performs a validation check on the provided aggregation function to ensure its validity. The set of
valid functions consists of all functions present in the AGG_FUNCS collection, as well as any other functions
that are callable. In the event that the specified condition is not met, a ValueError will be raised.</p>
<h2 id="args">Args</h2>
<p>func (Callable):
The function to be decorated.</p>
<h2 id="returns">Returns</h2>
<p>Callable:
The decorated function.</p></div>
</dd>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.validate_feature_group_indices"><code class="name flex">
<span>def <span class="ident">validate_feature_group_indices</span></span>(<span>func: Callable) ‑> Callable</span>
</code></dt>
<dd>
<div class="desc"><p>A decorator to validate feature group indices.</p>
<p>The decorator performs a validation check on the indices of the features group. This check ensures that the
indices fall within the valid range, which is defined as being within the total number of features in the dataset.
In the event that the specified condition is not met, a ValueError exception is raised.</p>
<h2 id="args">Args</h2>
<p>func (Callable):
The function to be decorated.</p>
<h2 id="returns">Returns</h2>
<p>Callable:
The decorated function.</p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.AggrFunc"><code class="flex name class">
<span>class <span class="ident">AggrFunc</span></span>
<span>(</span><span>*args: Any, **kwargs: Any)</span>
</code></dt>
<dd>
<div class="desc"><p>Class for Aggregation Function method of data transformation in longitudinal data analysis.</p>
<p>The AggrFunc class is designed to facilitate the application of an aggregation function to
feature groups within a longitudinal dataset. This class encapsulates the necessary functionality to perform this
operation efficiently and effectively. In software development, a feature group refers to a collection of
features that possess a common base feature while originating from distinct waves of data collection. In the given
scenario, it is observed that a dataset comprises three distinct features, namely "income_wave1", "income_wave2",
and "income_wave3". It is noteworthy that these features collectively constitute a group within the dataset.</p>
<p>The application of the aggregation function occurs iteratively across the waves, specifically targeting each
feature group. As a result, an aggregated feature is produced for every group. In the context of data
aggregation, when the designated aggregation function is the mean, it follows that the individual features
"income_wave1", "income_wave2", and "income_wave3" would undergo a transformation resulting in the creation of a
consolidated feature named "mean_income".</p>
<p>The latest update to the class incorporates enhanced functionality to accommodate custom aggregation functions,
as long as they adhere to the callable interface. The user has the ability to provide a function as an argument,
which is expected to accept a pandas Series as input and produce a singular value as output.</p>
<p>Furthermore, the provided class has been designed to facilitate parallel processing for the aggregation task by
leveraging the capabilities of the Ray library. The utilisation of this technique can yield a notable enhancement
in the efficiency of data transformation processes, particularly when dealing with substantial datasets.</p>
<h2 id="attributes">Attributes</h2>
<p>dataset (LongitudinalDataset):
The longitudinal dataset to apply the transformation to.
aggregation_func (Union[str, Callable]):
The aggregation function to apply to the feature groups. Can be "mean", "median", "mode", or a custom
function. If providing a custom function, it should be a function that takes a pandas Series and returns
a single value. If the function is not callable, a ValueError will be raised during validation. If the
aggregation function is "mean" or "median" and the feature group is categorical, the function is switched
to "mode" and a warning is issued.
parallel (bool):
Whether to use parallel processing for the aggregation.
num_cpus (int):
The number of CPUs to use for parallel processing. Defaults to -1, which uses all available CPUs.</p>
<h2 id="example">Example</h2>
<pre><code class="language-python"># Create a LongitudinalDataset object
dataset = LongitudinalDataset(data)

# Initialise the AggrFunc object with &quot;mean&quot; as the aggregation function
agg_func = AggrFunc(
    aggregation_func=&quot;mean&quot;,
    features_group=dataset.feature_groups(),
    non_longitudinal_features=dataset.non_longitudinal_features(),
    feature_list_names=dataset.data.columns.tolist()
)

# Initialise the AggrFunc object with a custom aggregation function
custom_func = lambda x: x.quantile(0.25) # returns the first quartile
agg_func = AggrFunc(
    aggregation_func=custom_func
    features_group=dataset.feature_groups(),
    non_longitudinal_features=dataset.non_longitudinal_features(),
    feature_list_names=dataset.data.columns.tolist()
),

# Apply the transformation
agg_func.prepare_data(dataset.data)
transformed_dataset, transformed_features_group, transformed_non_longitudinal_features,             transformed_feature_list_names = agg_func.transform()
</code></pre></div>
<h3>Methods</h3>
<dl>
<dt id="scikit_longitudinal.data_preparation.aggregation_function.AggrFunc.get_params"><code class="name flex">
<span>def <span class="ident">get_params</span></span>(<span>self, deep: bool = True)</span>
</code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="scikit_longitudinal.data_preparation" href="index.html">scikit_longitudinal.data_preparation</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="scikit_longitudinal.data_preparation.aggregation_function.get_agg_feature" href="#scikit_longitudinal.data_preparation.aggregation_function.get_agg_feature">get_agg_feature</a></code></li>
<li><code><a title="scikit_longitudinal.data_preparation.aggregation_function.init_ray" href="#scikit_longitudinal.data_preparation.aggregation_function.init_ray">init_ray</a></code></li>
<li><code><a title="scikit_longitudinal.data_preparation.aggregation_function.mode_with_keepdims" href="#scikit_longitudinal.data_preparation.aggregation_function.mode_with_keepdims">mode_with_keepdims</a></code></li>
<li><code><a title="scikit_longitudinal.data_preparation.aggregation_function.validate_aggregation_func" href="#scikit_longitudinal.data_preparation.aggregation_function.validate_aggregation_func">validate_aggregation_func</a></code></li>
<li><code><a title="scikit_longitudinal.data_preparation.aggregation_function.validate_feature_group_indices" href="#scikit_longitudinal.data_preparation.aggregation_function.validate_feature_group_indices">validate_feature_group_indices</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="scikit_longitudinal.data_preparation.aggregation_function.AggrFunc" href="#scikit_longitudinal.data_preparation.aggregation_function.AggrFunc">AggrFunc</a></code></h4>
<ul class="">
<li><code><a title="scikit_longitudinal.data_preparation.aggregation_function.AggrFunc.get_params" href="#scikit_longitudinal.data_preparation.aggregation_function.AggrFunc.get_params">get_params</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>